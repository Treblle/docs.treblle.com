---
title: Customers
---

The Customer section in Treblle provides a comprehensive view of your API's usage by individual customers. 

It helps you understand how different customers interact with your API, identify trends in their usage patterns, and pinpoint potential issues or areas for improvement.

## Steps to View the Customer Section

Click on **"Customers"** in the left navigation bar.

  <img
    src="/platform/customers/customer.png"
    width="200"
    style={{ borderRadius: "8px" }}
  />

#### Overview of the Customer Section

The Customer Dashboard provides a comprehensive overview of all your customers and their API usage. 

Here's what you'll find:
    
  - **Customer Profiles:**  A list of all your customers, identified by their name or Customer ID.
  - **Request Count:**  The total number of API requests each customer makes.
  - **Overall Percentage:** The percentage of total API requests attributed to each customer, giving you a sense of their impact on your API traffic.
  - **Last Active:** A timestamp indicating when each customer made their last API request.

    <img
      src="/platform/customers/overview.png"
      width="800"
      style={{ borderRadius: "8px" }}
    />

#### Sorting Options
    
To help you find the information you need, you can sort the customer list by:

  - **Customer ID:**  Organize customers alphabetically by their ID.
  - **Request Count:**  See your most active customers first.
  - **Most Recent Request:**  Identify the customers who recently interacted with your API.

    <img
      src="/platform/customers/sort.png"
      width="300"
      style={{ borderRadius: "8px" }}
    />


#### Customer Profile

Click on a customer's profile to access a detailed breakdown of their API usage. 

The Customer Profile includes:
  - **Request History:**  A complete list of all API requests made by that customer.
  - **Request Graph:**  A visual representation of the customer's API request activity over time. This graph helps you identify peak usage periods, trends, and potential anomalies. 
  
    <img
      src="/platform/customers/dashboard.png"
      width="800"
      style={{ borderRadius: "8px" }}
    />

### Attaching Customer/User ID to Requests

Treblle does not automatically attach a Customer or User ID to API requests. If you want to track API usage by individual customers, you need to modify the request headers to include one.

#### Example: Adding Customer ID in Express

To ensure every API request contains a Customer ID, you can create a middleware that extracts the authenticated user’s ID and adds it to the request headers before Treblle processes it.

Modify your Express middleware to include the `Customer ID` in request headers.

```javascript
// Custom middleware to add Customer ID
app.use((req, res, next) => {
    if (req.user) {  // Ensure the user is authenticated
        req.headers['X-Customer-ID'] = req.user.id; // Attach Customer ID to headers
    }
    next();
});

// Treblle Middleware
app.use(treblle({
    apiKey: process.env.TREBLLE_API_KEY,
    projectId: process.env.TREBLLE_PROJECT_ID
}));
```

#### Treblle Dashboard View of Customer ID

```javascript
app.use((req, res, next) => {
    // Simulating an authenticated user
    req.user = { id: "12345" }; // Replace with a real user ID from your database
    req.headers['X-Customer-ID'] = req.user.id;
    next();
});
```
<img
  src="/platform/customers/header.png"
  width="500"
  style={{ borderRadius: "8px" }}
/>


#### Pseudo-Code for Other SDKs

For other SDKs, the process is similar, and here’s a pseudo-code to help you understand the general approach:

1. Check if the user is authenticated and Retrieve the Customer ID from the authentication system.

   ```bash
   if (isAuthenticated) {
       customerId = getCustomerIdFromSession() // Fetch Customer ID from session or token
   }
   ```

2. Add the Customer ID to the request headers (typically as "X-Customer-ID").

   ```bash
   request.headers.set('X-Customer-ID', customerId)
   ```

3. Apply middleware to track customer data in API requests.

   ```bash
   applyMiddleware('customerTrackingMiddleware', routes) 
   ```

For specific integration details for other SDKs, please refer to the [Integration page](https://docs.treblle.com/integrations/).

The Customer section in Treblle gives valuable insights into how your customers use your API. You can use this information to improve your product, support, and overall customer experience.
